<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Fitness Coach - Personalization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
        }
        .animate-fadeIn { animation: fadeIn 0.8s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-spin-fast { animation: spin 0.8s linear infinite; }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .option-btn.selected {
            background-color: #16a34a;
            color: white;
            border-color: #16a34a;
            transform: scale(1.05);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="bg-white rounded-3xl shadow-2xl overflow-hidden max-w-4xl w-full p-8 transition-all duration-300">
        <div class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-bold text-gray-800 leading-tight mb-2">Your <span class="text-green-500">AI</span> Fitness Coach</h1>
            <p class="text-gray-500 text-lg sm:text-xl">Let's craft today's perfect workout, just for you.</p>
        </div>

        <div id="input-section">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <label for="goal" class="block text-sm font-medium text-gray-700 mb-2">1. What's your primary goal?</label>
                    <select id="goal" class="w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:ring-green-500 focus:border-green-500 text-gray-700">
                        <option value="weight_loss">Weight Loss</option>
                        <option value="muscle_gain">Muscle Gain</option>
                        <option value="flexibility">Flexibility & Core</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">2. How's your energy today?</label>
                    <div id="energy-level-group" class="flex justify-between gap-2">
                        <button data-value="sore" class="option-btn w-full p-3 border border-gray-300 rounded-xl shadow-sm transition-all duration-200"><i class="fas fa-battery-quarter mr-1"></i> Sore</button>
                        <button data-value="good" class="option-btn w-full p-3 border border-gray-300 rounded-xl shadow-sm transition-all duration-200 selected"><i class="fas fa-battery-half mr-1"></i> Good</button>
                        <button data-value="energized" class="option-btn w-full p-3 border border-gray-300 rounded-xl shadow-sm transition-all duration-200"><i class="fas fa-battery-full mr-1"></i> Energized</button>
                    </div>
                </div>
            </div>
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">3. What's your dietary preference?</label>
                <div id="diet-group" class="flex justify-between gap-4">
                    <button data-value="veg" class="option-btn w-full p-3 border border-gray-300 rounded-xl shadow-sm transition-all duration-200 selected">ü•ó Vegetarian</button>
                    <button data-value="nonveg" class="option-btn w-full p-3 border border-gray-300 rounded-xl shadow-sm transition-all duration-200">üçó Non-Vegetarian</button>
                </div>
            </div>
            <button id="generate-btn" class="w-full px-6 py-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105 active:scale-95 text-lg">
                Craft My Dynamic Workout <i class="fas fa-cogs ml-2"></i>
            </button>
        </div>

        <div id="loading-state" class="hidden text-center py-12">
            <i class="fas fa-brain fa-4x text-green-500 animate-spin-fast mb-4"></i>
            <p class="text-xl text-gray-700 font-semibold">SynapseAI is thinking...</p>
            <p class="text-sm text-gray-500 mt-2">Analyzing your progress and recovery data...</p>
        </div>

        <div id="plan-output" class="hidden animate-fadeIn">
            <div id="ai-analysis" class="bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-r-lg mb-6">
                <h4 class="font-bold flex items-center"><i class="fas fa-info-circle mr-2"></i> SynapseAI Analysis</h4>
                <p id="analysis-text" class="text-sm mt-1"></p>
            </div>
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Your Custom-Generated Plan</h2>
            <div id="plan-sections" class="flex flex-col gap-8">
                <div id="workout-plan" class="bg-gray-50 p-6 rounded-2xl shadow-inner"></div>
                <div id="pre-workout-plan" class="bg-gray-50 p-6 rounded-2xl shadow-inner"></div>
            </div>
            <div class="text-center mt-8">
                <a href="tracking.html" class="px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg">
                    View My Progress Dashboard <i class="fas fa-chart-line ml-2"></i>
                </a>
            </div>
        </div>
    </div>

    <script>
        let selectedEnergy = 'good';
        let selectedDiet = 'veg';

        document.getElementById('energy-level-group').addEventListener('click', (e) => {
            const button = e.target.closest('.option-btn');
            if (!button) return;
            selectedEnergy = button.dataset.value;
            document.querySelectorAll('#energy-level-group .option-btn').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
        });

        document.getElementById('diet-group').addEventListener('click', (e) => {
            const button = e.target.closest('.option-btn');
            if (!button) return;
            selectedDiet = button.dataset.value;
            document.querySelectorAll('#diet-group .option-btn').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
        });

        document.getElementById('generate-btn').addEventListener('click', function() {
            const goal = document.getElementById('goal').value;

            document.getElementById('input-section').classList.add('hidden');
            document.getElementById('plan-output').classList.add('hidden');
            document.getElementById('loading-state').classList.remove('hidden');

            setTimeout(() => {
                const progress = loadProgressData();
                const plan = getDynamicPlan(goal, selectedEnergy, progress, selectedDiet);

                document.getElementById('analysis-text').textContent = plan.analysis;
                document.getElementById('workout-plan').innerHTML = plan.workout;
                document.getElementById('pre-workout-plan').innerHTML = plan.nutrition;
                
                saveWorkoutData(goal, plan.stats);
                
                document.getElementById('loading-state').classList.add('hidden');
                document.getElementById('plan-output').classList.remove('hidden');
            }, 2000);
        });
        
        function loadProgressData() {
            const workouts = JSON.parse(localStorage.getItem('workouts')) || [];
            return { totalWorkouts: workouts.length };
        }
        
        function getDynamicPlan(goal, energy, progress, diet) {
            let analysis = "";
            let plan = {};

            const basePlans = {
                weight_loss: {
                    workout: `<h3 class="text-2xl font-semibold text-green-600 mb-4 flex items-center gap-3"><i class="fas fa-dumbbell"></i> Workout Plan</h3><p class="mb-2">Your plan is tailored for efficient calorie burning...</p><div class="bg-white p-4 rounded-xl shadow-sm"><h4 class="text-lg font-bold mb-2 text-green-600">Full Body HIIT & Cardio</h4><ul class="list-disc list-inside space-y-1 text-sm text-gray-600"><li>Warm-up (5 min)</li><li>HIIT Circuit (4 rounds): 45s Jumping Jacks, 45s Burpees, 45s High Knees. 30s rest.</li><li>Cardio: 20 minutes brisk walk/jog.</li></ul></div>`,
                    nutrition: {
                        veg: `<h3 class="text-2xl font-semibold text-green-600 mb-4 flex items-center gap-3"><i class="fas fa-seedling"></i> Nutrition & Fuel</h3><p class="mb-2">Focus on a calorie deficit...</p><div class="bg-white p-4 rounded-xl shadow-sm"><h4 class="text-lg font-bold mb-2 text-green-600">Veg Pre-Workout Fuel:</h4><p class="text-sm text-gray-600">A bowl of oats with berries or a handful of almonds 30-45 minutes before training.</p></div>`,
                        nonveg: `<h3 class="text-2xl font-semibold text-green-600 mb-4 flex items-center gap-3"><i class="fas fa-seedling"></i> Nutrition & Fuel</h3><p class="mb-2">Focus on a calorie deficit...</p><div class="bg-white p-4 rounded-xl shadow-sm"><h4 class="text-lg font-bold mb-2 text-green-600">Non-Veg Pre-Workout Fuel:</h4><p class="text-sm text-gray-600">A couple of boiled eggs or a small piece of grilled chicken 30-45 minutes before training.</p></div>`
                    },
                    stats: { duration: 45, calories: 350, volume: 150 }
                },
                muscle_gain: {
                    workout: `<h3 class="text-2xl font-semibold text-green-600 mb-4 flex items-center gap-3"><i class="fas fa-dumbbell"></i> Workout Plan</h3><p class="mb-2">This plan is for muscle hypertrophy...</p><div class="bg-white p-4 rounded-xl shadow-sm"><h4 class="text-lg font-bold mb-2 text-green-600">Upper Body Strength</h4><ul class="list-disc list-inside space-y-1 text-sm text-gray-600"><li>Bench Press (4 sets of 8)</li><li>Pull-ups (4 sets to failure)</li><li>Overhead Press (4 sets of 8)</li><li>Barbell Curls (3 sets of 10)</li></ul></div>`,
                    nutrition: {
                        veg: `<h3 class="text-2xl font-semibold text-green-600 mb-4 flex items-center gap-3"><i class="fas fa-seedling"></i> Nutrition & Fuel</h3><p class="mb-2">A caloric surplus with high protein...</p><div class="bg-white p-4 rounded-xl shadow-sm"><h4 class="text-lg font-bold mb-2 text-green-600">Veg Pre-Workout Fuel:</h4><p class="text-sm text-gray-600">A meal with tofu/paneer and brown rice, or Greek yogurt with fruit, 60-90 minutes before your workout.</p></div>`,
                        nonveg: `<h3 class="text-2xl font-semibold text-green-600 mb-4 flex items-center gap-3"><i class="fas fa-seedling"></i> Nutrition & Fuel</h3><p class="mb-2">A caloric surplus with high protein...</p><div class="bg-white p-4 rounded-xl shadow-sm"><h4 class="text-lg font-bold mb-2 text-green-600">Non-Veg Pre-Workout Fuel:</h4><p class="text-sm text-gray-600">A meal with chicken/fish and brown rice 60-90 minutes before your workout.</p></div>`
                    },
                    stats: { duration: 75, calories: 450, volume: 2500 }
                },
                flexibility: {
                    workout: `<h3 class="text-2xl font-semibold text-green-600 mb-4 flex items-center gap-3"><i class="fas fa-dumbbell"></i> Workout Plan</h3><p class="mb-2">This plan focuses on range of motion...</p><div class="bg-white p-4 rounded-xl shadow-sm"><h4 class="text-lg font-bold mb-2 text-green-600">Mobility & Core</h4><ul class="list-disc list-inside space-y-1 text-sm text-gray-600"><li>Warm-up (5 min): Light cardio, then dynamic stretches.</li><li>Plank (3 sets of 60s)</li><li>Bird Dog (3 sets of 10 reps per side)</li><li>Full Body Stretching (10 min)</li></ul></div>`,
                    nutrition: {
                        veg: `<h3 class="text-2xl font-semibold text-green-600 mb-4 flex items-center gap-3"><i class="fas fa-seedling"></i> Nutrition & Fuel</h3><p class="mb-2">Your nutrition supports joint health...</p><div class="bg-white p-4 rounded-xl shadow-sm"><h4 class="text-lg font-bold mb-2 text-green-600">Veg Pre-Workout Fuel:</h4><p class="text-sm text-gray-600">A light snack like a handful of walnuts or a piece of fruit 30 minutes before your session.</p></div>`,
                        nonveg: `<h3 class="text-2xl font-semibold text-green-600 mb-4 flex items-center gap-3"><i class="fas fa-seedling"></i> Nutrition & Fuel</h3><p class="mb-2">Your nutrition supports joint health...</p><div class="bg-white p-4 rounded-xl shadow-sm"><h4 class="text-lg font-bold mb-2 text-green-600">Non-Veg Pre-Workout Fuel:</h4><p class="text-sm text-gray-600">A light snack like a cup of bone broth or a piece of fruit 30 minutes before your session.</p></div>`
                    },
                    stats: { duration: 30, calories: 150, volume: 0 }
                }
            };
            
            plan = { 
                workout: basePlans[goal].workout,
                stats: basePlans[goal].stats,
                nutrition: basePlans[goal].nutrition[diet] 
            };

            if (progress.totalWorkouts >= 10) {
                analysis += `I see you've completed ${progress.totalWorkouts} workouts! You're consistent. I've increased the intensity to an intermediate level. `;
                plan.stats.duration *= 1.1;
                plan.stats.calories *= 1.15;
            } else if (progress.totalWorkouts >= 3) {
                analysis += `You've completed ${progress.totalWorkouts} workouts, great start! We're sticking to the fundamentals. `;
            } else {
                analysis += `Welcome! This is your first workout. We'll focus on proper form. `;
            }

            if (energy === 'sore') {
                analysis += "You're feeling sore, so I've designed a lighter, active recovery session.";
                plan.stats.calories *= 0.7;
                plan.workout = `<h3 class="text-2xl font-semibold text-green-600 mb-4"><i class="fas fa-spa"></i> Active Recovery & Mobility</h3><p>Focus on gentle movement...</p><ul class="list-disc list-inside mt-2 bg-white p-4 rounded-xl shadow-sm"><li>15 min Light Cardio</li><li>10 min Full Body Stretching</li><li>Foam Rolling</li></ul>`;
            } else if (energy === 'energized') {
                analysis += "You're feeling energized, so I've added an optional finisher!";
                plan.stats.calories *= 1.1;
                plan.workout += `<div class="bg-white p-4 rounded-xl shadow-sm mt-4"><h4 class="text-lg font-bold mb-2 text-orange-500">üî• Optional Finisher</h4><p class="text-sm text-gray-600">Burpees (3 sets to failure)</p></div>`;
            } else {
                analysis += "Energy levels are good, so we're proceeding with the optimal plan.";
            }

            return { ...plan, analysis };
        }
        
        function saveWorkoutData(goal, stats) {
            const workouts = JSON.parse(localStorage.getItem('workouts')) || [];
            const goalNames = { weight_loss: 'Weight Loss AI', muscle_gain: 'Muscle Gain AI', flexibility: 'Flexibility AI' };
            const newWorkout = {
                id: Date.now(),
                date: new Date().toISOString(),
                type: goalNames[goal] || 'AI Workout',
                duration: Math.round(stats.duration),
                calories: Math.round(stats.calories),
                volume: Math.round(stats.volume)
            };
            workouts.unshift(newWorkout);
            localStorage.setItem('workouts', JSON.stringify(workouts));
        }
    </script>
</body>
</html>